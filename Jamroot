import os ;
using python ;
using doxygen ;

local BOOST_ROOT = [ os.environ BOOST_ROOT ] ; 
if $(BOOST_ROOT) = ""
{
    BOOST_ROOT = "/usr/local/share/boost" ;
}

project siblings
    : requirements
        <variant>release:<warnings>off ;

use-project /boost : $(BOOST_ROOT) ;

build-project src/cpp/siblings ;

install dist-cpp : src/cpp/siblings
    : <variant>debug:<location>dist/lib/python/debug/siblings
      <variant>release:<location>dist/lib/python/release/siblings
      <install-type>LIB <variant>debug ;
install dist-python : [ glob src/python/siblings_2/*.py ]
    : <variant>debug:<location>dist/lib/python/debug/siblings
      <variant>release:<location>dist/lib/python/release/siblings ;
install dist-bootstrap : src/python/siblings.py
    : <variant>debug:<location>dist/lib/python/debug
      <variant>release:<location>dist/lib/python/release ;
alias dist : dist-cpp dist-python dist-bootstrap ;

# kludge: generate separate documentation trees for debug and release builds to
# avoid target collisions
doxygen siblings.html
    : [ glob src/cpp/siblings/*.hpp src/cpp/siblings/detail/*.hpp ]
    : <location>doc/api/debug <variant>debug ;
doxygen siblings.html
    : [ glob src/cpp/siblings/*.hpp src/cpp/siblings/detail/*.hpp ]
    : <location>doc/api/release <variant>release ;
